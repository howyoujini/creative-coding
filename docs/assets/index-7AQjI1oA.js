var ht=Object.defineProperty;var ct=(f,t,s)=>t in f?ht(f,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):f[t]=s;var a=(f,t,s)=>ct(f,typeof t!="symbol"?t+"":t,s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function s(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=s(e);fetch(e.href,o)}})();const rt=.5*(Math.sqrt(3)-1),B=(3-Math.sqrt(3))/6,T=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];class lt{constructor(t=Math.random()*65536){a(this,"perm",[]);a(this,"permMod12",[]);const s=[];for(let i=0;i<256;i++)s[i]=Math.floor(this.seededRandom(t+i)*256);for(let i=0;i<512;i++)this.perm[i]=s[i&255],this.permMod12[i]=this.perm[i]%12}seededRandom(t){const s=Math.sin(t)*1e4;return s-Math.floor(s)}noise2D(t,s){let i=0,e=0,o=0;const n=(t+s)*rt,r=Math.floor(t+n),c=Math.floor(s+n),l=(r+c)*B,d=r-l,p=c-l,m=t-d,u=s-p;let x,g;m>u?(x=1,g=0):(x=0,g=1);const y=m-x+B,w=u-g+B,P=m-1+2*B,S=u-1+2*B,M=r&255,b=c&255,L=this.permMod12[M+this.perm[b]],k=this.permMod12[M+x+this.perm[b+g]],D=this.permMod12[M+1+this.perm[b+1]];let I=.5-m*m-u*u;I>=0&&(I*=I,i=I*I*this.dot(T[L],m,u));let F=.5-y*y-w*w;F>=0&&(F*=F,e=F*F*this.dot(T[k],y,w));let R=.5-P*P-S*S;return R>=0&&(R*=R,o=R*R*this.dot(T[D],P,S)),70*(i+e+o)}noise3D(t,s,i){const e=.3333333333333333,o=1/6,n=(t+s+i)*e,r=Math.floor(t+n),c=Math.floor(s+n),l=Math.floor(i+n),d=(r+c+l)*o,p=r-d,m=c-d,u=l-d,x=t-p,g=s-m,y=i-u;let w,P,S,M,b,L;x>=g?g>=y?(w=1,P=0,S=0,M=1,b=1,L=0):x>=y?(w=1,P=0,S=0,M=1,b=0,L=1):(w=0,P=0,S=1,M=1,b=0,L=1):g<y?(w=0,P=0,S=1,M=0,b=1,L=1):x<y?(w=0,P=1,S=0,M=0,b=1,L=1):(w=0,P=1,S=0,M=1,b=1,L=0);const k=x-w+o,D=g-P+o,I=y-S+o,F=x-M+2*o,R=g-b+2*o,O=y-L+2*o,G=x-1+3*o,N=g-1+3*o,K=y-1+3*o,H=r&255,A=c&255,V=l&255,et=this.permMod12[H+this.perm[A+this.perm[V]]],ot=this.permMod12[H+w+this.perm[A+P+this.perm[V+S]]],at=this.permMod12[H+M+this.perm[A+b+this.perm[V+L]]],nt=this.permMod12[H+1+this.perm[A+1+this.perm[V+1]]];let Z=0,J=0,Q=0,_=0,C=.6-x*x-g*g-y*y;C>=0&&(C*=C,Z=C*C*this.dot3(T[et],x,g,y));let W=.6-k*k-D*D-I*I;W>=0&&(W*=W,J=W*W*this.dot3(T[ot],k,D,I));let z=.6-F*F-R*R-O*O;z>=0&&(z*=z,Q=z*z*this.dot3(T[at],F,R,O));let $=.6-G*G-N*N-K*K;return $>=0&&($*=$,_=$*$*this.dot3(T[nt],G,N,K)),32*(Z+J+Q+_)}dot(t,s,i){return t[0]*s+t[1]*i}dot3(t,s,i,e){return t[0]*s+t[1]*i+t[2]*e}}const E=new lt(12345);function Y(f,t,s,i=.005){const o=E.noise3D(f*i,t*i,s),n=E.noise3D(f*i,(t+1e-4)*i,s),r=E.noise3D((f+1e-4)*i,t*i,s),c=(n-o)/1e-4;return{x:(r-o)/1e-4,y:-c}}class h{constructor(t=0,s=0){this.x=t,this.y=s}static create(t,s){return new h(t,s)}static random(){const t=Math.random()*Math.PI*2;return new h(Math.cos(t),Math.sin(t))}static fromAngle(t){return new h(Math.cos(t),Math.sin(t))}copy(){return new h(this.x,this.y)}add(t){return this.x+=t.x,this.y+=t.y,this}sub(t){return this.x-=t.x,this.y-=t.y,this}mult(t){return this.x*=t,this.y*=t,this}div(t){return t!==0&&(this.x/=t,this.y/=t),this}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}magSq(){return this.x*this.x+this.y*this.y}normalize(){const t=this.mag();return t>0&&this.div(t),this}limit(t){const s=this.magSq();return s>t*t&&this.div(Math.sqrt(s)).mult(t),this}setMag(t){return this.normalize().mult(t)}heading(){return Math.atan2(this.y,this.x)}rotate(t){const s=Math.cos(t),i=Math.sin(t),e=this.x*s-this.y*i,o=this.x*i+this.y*s;return this.x=e,this.y=o,this}dist(t){const s=this.x-t.x,i=this.y-t.y;return Math.sqrt(s*s+i*i)}lerp(t,s){return this.x+=(t.x-this.x)*s,this.y+=(t.y-this.y)*s,this}static sub(t,s){return new h(t.x-s.x,t.y-s.y)}static add(t,s){return new h(t.x+s.x,t.y+s.y)}static mult(t,s){return new h(t.x*s,t.y*s)}static dist(t,s){return t.dist(s)}static lerp(t,s,i){return new h(t.x+(s.x-t.x)*i,t.y+(s.y-t.y)*i)}}function j(){return document.body.classList.contains("light-mode")}function v(f=1){return j()?`rgba(255, 255, 255, ${f})`:`rgba(10, 10, 15, ${f})`}function q(){return j()?"#ffffff":"#0a0a0f"}function tt(){return j()?"#1a1a1a":"#ffffff"}function st(){return j()?"#555":"#666"}class dt{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"particles",[]);a(this,"time",0);a(this,"animationId",0);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;this.ctx.fillStyle=v(.05),this.ctx.fillRect(0,0,t,s),this.time+=.003;for(const i of this.particles){const e=Y(i.pos.x,i.pos.y,this.time,.003);if(i.vel.x+=e.x*.3,i.vel.y+=e.y*.3,i.vel.mult(.95),i.vel.limit(2.5),i.pos.add(i.vel),i.life++,i.trail.push(i.pos.copy()),i.trail.length>50&&i.trail.shift(),i.trail.length>2){this.ctx.beginPath(),this.ctx.moveTo(i.trail[0].x,i.trail[0].y);for(let n=1;n<i.trail.length;n++)this.ctx.lineTo(i.trail[n].x,i.trail[n].y);const o=Math.min(i.life/50,1)*(1-i.life/i.maxLife);this.ctx.strokeStyle=`rgba(248, 113, 113, ${o})`,this.ctx.lineWidth=3,this.ctx.stroke()}if(i.pos.x<-50||i.pos.x>t+50||i.pos.y<-50||i.pos.y>s+50||i.life>i.maxLife){const o=this.createParticle();i.pos=o.pos,i.vel=o.vel,i.life=0,i.trail=[]}}});this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.resize(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=this.canvas.offsetWidth*window.devicePixelRatio,this.canvas.height=this.canvas.offsetHeight*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}createParticle(){const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;return{pos:new h(Math.random()*t,Math.random()*s),vel:new h(0,0),life:0,maxLife:200+Math.random()*200,trail:[]}}start(){for(let s=0;s<150;s++)this.particles.push(this.createParticle());this.animate()}stop(){cancelAnimationFrame(this.animationId),this.particles=[]}}class ft{constructor(t,s){a(this,"canvasLeft");a(this,"canvasRight");a(this,"ctxLeft");a(this,"ctxRight");a(this,"dotsLeft",[]);a(this,"dotsRight",[]);a(this,"time",0);a(this,"animationId",0);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvasLeft.parentElement,s=t.offsetWidth,i=t.offsetHeight;this.ctxLeft.fillStyle=v(.15),this.ctxLeft.fillRect(0,0,s,i),this.ctxRight.fillStyle=v(.15),this.ctxRight.fillRect(0,0,s,i),this.time+=.02;for(const e of this.dotsLeft)Math.random()<.05&&(e.pos.x=e.basePos.x+(Math.random()-.5)*40,e.pos.y=e.basePos.y+(Math.random()-.5)*40),this.ctxLeft.beginPath(),this.ctxLeft.arc(e.pos.x,e.pos.y,4,0,Math.PI*2),this.ctxLeft.fillStyle="rgba(248, 113, 113, 0.8)",this.ctxLeft.fill();for(const e of this.dotsRight){const o=E.noise2D(e.basePos.x*.01,e.basePos.y*.01+this.time);e.pos.x=e.basePos.x+Math.sin(this.time+e.phase)*15,e.pos.y=e.basePos.y+Math.cos(this.time*.8+e.phase)*15+o*10,this.ctxRight.beginPath(),this.ctxRight.arc(e.pos.x,e.pos.y,4,0,Math.PI*2),this.ctxRight.fillStyle="rgba(248, 113, 113, 0.8)",this.ctxRight.fill()}});this.canvasLeft=document.getElementById(t),this.canvasRight=document.getElementById(s),this.ctxLeft=this.canvasLeft.getContext("2d"),this.ctxRight=this.canvasRight.getContext("2d"),this.resize()}resize(){const t=this.canvasLeft.parentElement,s=t.offsetWidth,i=t.offsetHeight,e=window.devicePixelRatio;this.canvasLeft.width=s*e,this.canvasLeft.height=i*e,this.canvasRight.width=s*e,this.canvasRight.height=i*e,this.ctxLeft.scale(e,e),this.ctxRight.scale(e,e),this.canvasLeft.style.width=`${s}px`,this.canvasLeft.style.height=`${i}px`,this.canvasRight.style.width=`${s}px`,this.canvasRight.style.height=`${i}px`}start(){const t=this.canvasLeft.parentElement,s=t.offsetWidth,i=t.offsetHeight;this.dotsLeft=[],this.dotsRight=[];const e=10,o=6,n=s/(e+1),r=i/(o+1);for(let c=0;c<e;c++)for(let l=0;l<o;l++){const d=n*(c+1),p=r*(l+1);this.dotsLeft.push({pos:new h(d,p),vel:new h(0,0),basePos:new h(d,p),phase:Math.random()*Math.PI*2}),this.dotsRight.push({pos:new h(d,p),vel:new h(0,0),basePos:new h(d,p),phase:(c+l)*.5})}this.animate()}stop(){cancelAnimationFrame(this.animationId),this.dotsLeft=[],this.dotsRight=[]}}class pt{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"time",0);a(this,"animationId",0);a(this,"currentRule","linear");a(this,"pos");a(this,"vel");a(this,"target");a(this,"trail",[]);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight,i=t/2,e=s/2;switch(this.ctx.fillStyle=v(.08),this.ctx.fillRect(0,0,t,s),this.time+=.02,this.currentRule){case"linear":this.target.x=i+Math.sin(this.time)*200,this.target.y=e,this.pos.lerp(this.target,.1);break;case"circular":{this.target.x=i+Math.cos(this.time)*120,this.target.y=e+Math.sin(this.time)*120,this.pos.lerp(this.target,.15);break}case"noise":{const o=E.noise2D(this.time*.5,0),n=E.noise2D(0,this.time*.5);this.target.x=i+o*180,this.target.y=e+n*180,this.pos.lerp(this.target,.05);break}case"spring":{const o=new h(i+Math.sin(this.time*.5)*150,e+Math.cos(this.time*.3)*100),n=h.sub(o,this.pos);n.mult(.03),this.vel.add(n),this.vel.mult(.92),this.pos.add(this.vel);break}}if(this.trail.push(this.pos.copy()),this.trail.length>80&&this.trail.shift(),this.trail.length>2){this.ctx.beginPath(),this.ctx.moveTo(this.trail[0].x,this.trail[0].y);for(let o=1;o<this.trail.length;o++)this.ctx.lineTo(this.trail[o].x,this.trail[o].y);this.ctx.strokeStyle="rgba(248, 113, 113, 0.3)",this.ctx.lineWidth=2,this.ctx.stroke()}this.ctx.beginPath(),this.ctx.arc(this.pos.x,this.pos.y,12,0,Math.PI*2),this.ctx.fillStyle="#f87171",this.ctx.fill(),this.ctx.fillStyle="rgba(255, 255, 255, 0.3)",this.ctx.font="14px monospace",this.ctx.fillText(`Rule: ${this.currentRule}`,20,30)});this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.pos=new h(0,0),this.vel=new h(0,0),this.target=new h(0,0),this.resize(),this.setupControls(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=this.canvas.offsetWidth*window.devicePixelRatio,this.canvas.height=this.canvas.offsetHeight*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio);const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;this.pos=new h(t/2,s/2),this.target=new h(t/2,s/2)}setupControls(){const t=document.querySelectorAll("[data-rule]");t.forEach(s=>{s.addEventListener("click",()=>{t.forEach(i=>i.classList.remove("active")),s.classList.add("active"),this.currentRule=s.getAttribute("data-rule"),this.trail=[],this.time=0})})}setRule(t){this.currentRule=t,this.trail=[],this.time=0}start(){this.animate()}stop(){cancelAnimationFrame(this.animationId)}}class mt{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"particles",[]);a(this,"time",0);a(this,"animationId",0);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;this.ctx.fillStyle=v(.03),this.ctx.fillRect(0,0,t,s),this.time+=.01;for(const i of this.particles){const e=E.noise2D(i.pos.x*.003+this.time,i.pos.y*.003);i.vel.x+=e*.01,i.vel.y+=E.noise2D(i.pos.y*.003+this.time,i.pos.x*.003)*.01,i.vel.limit(.8),i.pos.add(i.vel),i.pos.x<0&&(i.pos.x=t),i.pos.x>t&&(i.pos.x=0),i.pos.y<0&&(i.pos.y=s),i.pos.y>s&&(i.pos.y=0),this.ctx.beginPath(),this.ctx.arc(i.pos.x,i.pos.y,2,0,Math.PI*2),this.ctx.fillStyle=`rgba(248, 113, 113, ${i.alpha*.5})`,this.ctx.fill()}for(let i=0;i<this.particles.length;i++)for(let e=i+1;e<this.particles.length;e++){const o=h.dist(this.particles[i].pos,this.particles[e].pos);o<80&&(this.ctx.beginPath(),this.ctx.moveTo(this.particles[i].pos.x,this.particles[i].pos.y),this.ctx.lineTo(this.particles[e].pos.x,this.particles[e].pos.y),this.ctx.strokeStyle=`rgba(248, 113, 113, ${(1-o/80)*.1})`,this.ctx.lineWidth=.5,this.ctx.stroke())}});this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.resize(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=this.canvas.offsetWidth*window.devicePixelRatio,this.canvas.height=this.canvas.offsetHeight*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}start(){const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;for(let i=0;i<80;i++)this.particles.push({pos:new h(Math.random()*t,Math.random()*s),vel:new h((Math.random()-.5)*.5,(Math.random()-.5)*.5),target:Math.floor(Math.random()*5),alpha:.2+Math.random()*.3});this.animate()}stop(){cancelAnimationFrame(this.animationId),this.particles=[]}}class ut{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"pos");a(this,"vel");a(this,"acc");a(this,"time",0);a(this,"animationId",0);a(this,"trail",[]);a(this,"mass",1);a(this,"gravity",.1);a(this,"friction",.99);a(this,"bounce",.8);a(this,"windStrength",.15);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvas.parentElement,s=t.offsetWidth,i=t.offsetHeight;this.ctx.fillStyle=q(),this.ctx.fillRect(0,0,s,i),this.time+=.02,this.acc=new h(0,0),this.acc.add(new h(0,this.gravity/this.mass)),this.acc.add(new h(Math.sin(this.time)*this.windStrength/this.mass,0)),this.vel.add(this.acc),this.vel.mult(this.friction),this.pos.add(this.vel);const e=16+(this.mass-1)*8;if((this.pos.x<e||this.pos.x>s-e)&&(this.vel.x*=-this.bounce,this.pos.x=Math.max(e,Math.min(s-e,this.pos.x))),(this.pos.y<e||this.pos.y>i-e)&&(this.vel.y*=-this.bounce,this.pos.y=Math.max(e,Math.min(i-e,this.pos.y))),this.trail.push(this.pos.copy()),this.trail.length>40&&this.trail.shift(),this.trail.length>1){this.ctx.beginPath(),this.ctx.moveTo(this.trail[0].x,this.trail[0].y);for(let n=1;n<this.trail.length;n++)this.ctx.lineTo(this.trail[n].x,this.trail[n].y);this.ctx.strokeStyle="rgba(248, 113, 113, 0.2)",this.ctx.lineWidth=2,this.ctx.stroke()}this.ctx.beginPath(),this.ctx.arc(this.pos.x,this.pos.y,e,0,Math.PI*2),this.ctx.fillStyle="#f87171",this.ctx.fill(),this.ctx.fillStyle=q(),this.ctx.font=`${10+this.mass*2}px monospace`,this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(`${this.mass.toFixed(1)}`,this.pos.x,this.pos.y),this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",this.drawVector(this.pos,h.mult(this.vel,15),tt(),"velocity"),this.drawVector(this.pos,h.mult(this.acc,150),"#f87171","force"),this.ctx.fillStyle=st(),this.ctx.font="12px monospace",this.ctx.fillText(`position: (${this.pos.x.toFixed(0)}, ${this.pos.y.toFixed(0)})`,15,25),this.ctx.fillText(`velocity: (${this.vel.x.toFixed(2)}, ${this.vel.y.toFixed(2)})`,15,45),this.ctx.fillText(`acceleration: (${this.acc.x.toFixed(3)}, ${this.acc.y.toFixed(3)})`,15,65),this.ctx.fillText(`mass: ${this.mass.toFixed(1)}`,15,85);const o=i-50;this.ctx.fillStyle=tt(),this.ctx.fillRect(15,o,10,3),this.ctx.fillText("velocity",30,o+5),this.ctx.fillStyle="#f87171",this.ctx.fillRect(15,o+20,10,3),this.ctx.fillStyle=st(),this.ctx.fillText("force (a = F/m)",30,o+25)});this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.pos=new h(0,0),this.vel=new h(0,0),this.acc=new h(0,0),this.resize(),this.setupControls()}resize(){const t=this.canvas.parentElement,s=t.offsetWidth,i=t.offsetHeight,e=window.devicePixelRatio;this.canvas.width=s*e,this.canvas.height=i*e,this.ctx.scale(e,e),this.canvas.style.width=`${s}px`,this.canvas.style.height=`${i}px`,this.pos=new h(s/2,i/2),this.vel=new h(2,-1)}setupControls(){const t=document.getElementById("particle-mass"),s=document.getElementById("particle-gravity"),i=document.getElementById("particle-friction"),e=document.getElementById("particle-bounce"),o=document.getElementById("particle-wind");t&&t.addEventListener("input",n=>{this.mass=parseFloat(n.target.value),this.updateValueDisplay("particle-mass-value",this.mass.toFixed(1))}),s&&s.addEventListener("input",n=>{this.gravity=parseFloat(n.target.value),this.updateValueDisplay("particle-gravity-value",this.gravity.toFixed(2))}),i&&i.addEventListener("input",n=>{this.friction=parseFloat(n.target.value),this.updateValueDisplay("particle-friction-value",this.friction.toFixed(3))}),e&&e.addEventListener("input",n=>{this.bounce=parseFloat(n.target.value),this.updateValueDisplay("particle-bounce-value",this.bounce.toFixed(2))}),o&&o.addEventListener("input",n=>{this.windStrength=parseFloat(n.target.value),this.updateValueDisplay("particle-wind-value",this.windStrength.toFixed(2))})}updateValueDisplay(t,s){const i=document.getElementById(t);i&&(i.textContent=s)}start(){this.animate()}stop(){cancelAnimationFrame(this.animationId),this.trail=[]}drawVector(t,s,i,e){const o=h.add(t,s);this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(o.x,o.y),this.ctx.strokeStyle=i,this.ctx.lineWidth=2,this.ctx.stroke();const n=s.heading(),r=8;this.ctx.beginPath(),this.ctx.moveTo(o.x,o.y),this.ctx.lineTo(o.x-r*Math.cos(n-Math.PI/6),o.y-r*Math.sin(n-Math.PI/6)),this.ctx.moveTo(o.x,o.y),this.ctx.lineTo(o.x-r*Math.cos(n+Math.PI/6),o.y-r*Math.sin(n+Math.PI/6)),this.ctx.stroke()}}class xt{constructor(t,s,i={}){a(this,"pos");a(this,"vel");a(this,"acc");a(this,"prevPos");a(this,"mass");a(this,"radius");a(this,"life");a(this,"maxLife");a(this,"color");this.pos=new h(t,s),this.vel=new h(i.vx||0,i.vy||0),this.acc=new h(0,0),this.prevPos=new h(t,s),this.mass=i.mass||1,this.radius=i.radius||4,this.maxLife=i.life||1/0,this.life=this.maxLife,this.color=i.color||"#f87171"}applyForce(t){const s=h.mult(t,1/this.mass);this.acc.add(s)}updateEuler(t=1){this.vel.add(this.acc),this.pos.add(h.mult(this.vel,t)),this.acc.mult(0),this.life--}updateVerlet(t=1){const s=h.sub(this.pos,this.prevPos);this.prevPos=this.pos.copy(),this.pos.add(s),this.pos.add(h.mult(this.acc,t*t)),this.acc.mult(0),this.life--}edges(t,s,i=!0){i?(this.pos.x<this.radius&&(this.pos.x=this.radius,this.vel.x*=-.8,this.prevPos.x=this.pos.x+this.vel.x),this.pos.x>t-this.radius&&(this.pos.x=t-this.radius,this.vel.x*=-.8,this.prevPos.x=this.pos.x+this.vel.x),this.pos.y<this.radius&&(this.pos.y=this.radius,this.vel.y*=-.8,this.prevPos.y=this.pos.y+this.vel.y),this.pos.y>s-this.radius&&(this.pos.y=s-this.radius,this.vel.y*=-.8,this.prevPos.y=this.pos.y+this.vel.y)):(this.pos.x<0&&(this.pos.x=t),this.pos.x>t&&(this.pos.x=0),this.pos.y<0&&(this.pos.y=s),this.pos.y>s&&(this.pos.y=0))}isDead(){return this.life<=0}draw(t){t.beginPath(),t.arc(this.pos.x,this.pos.y,this.radius,0,Math.PI*2),t.fillStyle=this.color,t.fill()}}class X{constructor(t,s,i={}){a(this,"pos");a(this,"oldPos");a(this,"acc");a(this,"pinned");a(this,"mass");a(this,"radius");a(this,"color");this.pos=new h(t,s),this.oldPos=new h(t,s),this.acc=new h(0,0),this.pinned=i.pinned||!1,this.mass=i.mass||1,this.radius=i.radius||4,this.color=i.color||"#f87171"}applyForce(t){if(this.pinned)return;const s=h.mult(t,1/this.mass);this.acc.add(s)}update(t=.99){if(this.pinned)return;const s=h.sub(this.pos,this.oldPos).mult(t);this.oldPos=this.pos.copy(),this.pos.add(s),this.pos.add(this.acc),this.acc.mult(0)}draw(t){t.beginPath(),t.arc(this.pos.x,this.pos.y,this.radius,0,Math.PI*2),t.fillStyle=this.color,t.fill()}}class U{constructor(t,s,i,e=1){a(this,"p1");a(this,"p2");a(this,"length");a(this,"stiffness");this.p1=t,this.p2=s,this.length=i||h.dist(t.pos,s.pos),this.stiffness=e}solve(){const t=h.sub(this.p2.pos,this.p1.pos),s=t.mag(),i=(this.length-s)/s*this.stiffness,e=h.mult(t,i*.5);this.p1.pinned||this.p1.pos.sub(e),this.p2.pinned||this.p2.pos.add(e)}draw(t){t.beginPath(),t.moveTo(this.p1.pos.x,this.p1.pos.y),t.lineTo(this.p2.pos.x,this.p2.pos.y),t.strokeStyle="rgba(248, 113, 113, 0.5)",t.lineWidth=1,t.stroke()}}class gt{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"particles",[]);a(this,"mouse");a(this,"time",0);a(this,"animationId",0);a(this,"activeForces",new Set(["attract"]));a(this,"gravityStrength",.15);a(this,"attractStrength",.5);a(this,"noiseStrength",.2);a(this,"repelStrength",.8);a(this,"damping",.98);a(this,"particleCount",100);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;this.ctx.fillStyle=v(.15),this.ctx.fillRect(0,0,t,s),this.time+=.01;for(const o of this.particles){if(this.activeForces.has("gravity")&&o.applyForce(new h(0,this.gravityStrength)),this.activeForces.has("attract")){const c=h.sub(this.mouse,o.pos),l=c.mag();if(l>5){c.normalize();const d=Math.min(50/(l*.5),this.attractStrength);c.mult(d),o.applyForce(c)}}if(this.activeForces.has("repel")){const c=h.sub(o.pos,this.mouse),l=c.mag();if(l<150&&l>5){c.normalize();const d=(150-l)/150*this.repelStrength;c.mult(d),o.applyForce(c)}}if(this.activeForces.has("noise")){const l=E.noise2D(o.pos.x*.01+this.time,o.pos.y*.01)*Math.PI*2,d=h.fromAngle(l).mult(this.noiseStrength);o.applyForce(d)}o.vel.mult(this.damping),o.updateEuler(),o.edges(t,s,!0);const n=o.vel.mag(),r=Math.min(n*15,30);this.ctx.beginPath(),this.ctx.arc(o.pos.x,o.pos.y,o.radius,0,Math.PI*2),this.ctx.fillStyle=`hsla(${r}, 80%, 60%, 0.8)`,this.ctx.fill()}if(this.activeForces.has("attract")){this.ctx.beginPath(),this.ctx.arc(this.mouse.x,this.mouse.y,20,0,Math.PI*2),this.ctx.strokeStyle="rgba(248, 113, 113, 0.5)",this.ctx.lineWidth=2,this.ctx.stroke();for(let o=0;o<Math.PI*2;o+=Math.PI/4){const n=this.mouse.x+Math.cos(o)*35,r=this.mouse.y+Math.sin(o)*35,c=this.mouse.x+Math.cos(o)*25,l=this.mouse.y+Math.sin(o)*25;this.ctx.beginPath(),this.ctx.moveTo(n,r),this.ctx.lineTo(c,l),this.ctx.strokeStyle="rgba(248, 113, 113, 0.3)",this.ctx.stroke()}}if(this.activeForces.has("repel")){this.ctx.beginPath(),this.ctx.arc(this.mouse.x,this.mouse.y,25,0,Math.PI*2),this.ctx.strokeStyle="rgba(250, 204, 21, 0.5)",this.ctx.lineWidth=2,this.ctx.stroke();for(let o=0;o<Math.PI*2;o+=Math.PI/4){const n=this.mouse.x+Math.cos(o)*30,r=this.mouse.y+Math.sin(o)*30,c=this.mouse.x+Math.cos(o)*45,l=this.mouse.y+Math.sin(o)*45;this.ctx.beginPath(),this.ctx.moveTo(n,r),this.ctx.lineTo(c,l),this.ctx.strokeStyle="rgba(250, 204, 21, 0.3)",this.ctx.stroke()}}this.ctx.font="12px monospace";let i=15;const e=30;for(const o of this.activeForces){const n="#f87171";this.ctx.fillStyle=n,this.ctx.fillText(`[${o}]`,i,e),i+=this.ctx.measureText(`[${o}]`).width+15}this.ctx.fillStyle="#666",this.ctx.fillText(`particles: ${this.particles.length}`,15,s-15)});this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.mouse=new h(0,0),this.resize(),this.setupControls(),this.setupMouse(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=this.canvas.offsetWidth*window.devicePixelRatio,this.canvas.height=this.canvas.offsetHeight*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}setupControls(){document.querySelectorAll("[data-force]").forEach(s=>{s.addEventListener("click",()=>{const i=s.getAttribute("data-force");this.activeForces.has(i)?(this.activeForces.delete(i),s.classList.remove("active")):(this.activeForces.add(i),s.classList.add("active"))})}),this.setupSlider("force-gravity-strength",s=>{this.gravityStrength=s,this.updateValueDisplay("force-gravity-value",s.toFixed(2))}),this.setupSlider("force-attract-strength",s=>{this.attractStrength=s,this.updateValueDisplay("force-attract-value",s.toFixed(2))}),this.setupSlider("force-noise-strength",s=>{this.noiseStrength=s,this.updateValueDisplay("force-noise-value",s.toFixed(2))}),this.setupSlider("force-repel-strength",s=>{this.repelStrength=s,this.updateValueDisplay("force-repel-value",s.toFixed(2))}),this.setupSlider("force-damping",s=>{this.damping=s,this.updateValueDisplay("force-damping-value",s.toFixed(3))}),this.setupSlider("force-particle-count",s=>{this.particleCount=Math.floor(s),this.updateValueDisplay("force-particle-count-value",this.particleCount.toString()),this.resetParticles()})}setupSlider(t,s){const i=document.getElementById(t);i&&i.addEventListener("input",e=>{s(parseFloat(e.target.value))})}updateValueDisplay(t,s){const i=document.getElementById(t);i&&(i.textContent=s)}resetParticles(){const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;this.particles=[];for(let i=0;i<this.particleCount;i++)this.particles.push(new xt(Math.random()*t,Math.random()*s,{vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,radius:3+Math.random()*3}))}setupMouse(){this.canvas.addEventListener("mousemove",t=>{const s=this.canvas.getBoundingClientRect();this.mouse.x=t.clientX-s.left,this.mouse.y=t.clientY-s.top}),this.canvas.addEventListener("mouseleave",()=>{this.mouse.x=this.canvas.offsetWidth/2,this.mouse.y=this.canvas.offsetHeight/2})}start(){const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;this.mouse=new h(t/2,s/2),this.resetParticles(),this.animate()}stop(){cancelAnimationFrame(this.animationId),this.particles=[]}}class vt{constructor(t,s){a(this,"canvasEuler");a(this,"canvasVerlet");a(this,"ctxEuler");a(this,"ctxVerlet");a(this,"eulerParticle");a(this,"verletParticle");a(this,"animationId",0);a(this,"mouseEuler");a(this,"mouseVerlet");a(this,"time",0);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvasEuler.parentElement,s=t.offsetWidth,i=t.offsetHeight;this.time+=.016,this.updateEuler(s,i),this.updateVerlet(s,i),this.draw(this.ctxEuler,this.eulerParticle,s,i,this.mouseEuler),this.draw(this.ctxVerlet,this.verletParticle,s,i,this.mouseVerlet)});this.canvasEuler=document.getElementById(t),this.canvasVerlet=document.getElementById(s),this.ctxEuler=this.canvasEuler.getContext("2d"),this.ctxVerlet=this.canvasVerlet.getContext("2d"),this.eulerParticle=this.createParticle(),this.verletParticle=this.createParticle(),this.mouseEuler=new h(0,0),this.mouseVerlet=new h(0,0),this.resize(),this.setupMouse()}createParticle(){return{pos:new h(0,0),vel:new h(0,0),oldPos:new h(0,0),acc:new h(0,0),trail:[]}}resize(){[this.canvasEuler,this.canvasVerlet].forEach(i=>{const e=i.parentElement,o=e.offsetWidth,n=e.offsetHeight,r=window.devicePixelRatio;i.width=o*r,i.height=n*r,i.getContext("2d").scale(r,r),i.style.width=`${o}px`,i.style.height=`${n}px`});const t=this.canvasEuler.parentElement.offsetWidth,s=this.canvasEuler.parentElement.offsetHeight;this.eulerParticle.pos=new h(t/2,s/2),this.eulerParticle.oldPos=this.eulerParticle.pos.copy(),this.verletParticle.pos=new h(t/2,s/2),this.verletParticle.oldPos=this.verletParticle.pos.copy(),this.mouseEuler=new h(t/2,s/2),this.mouseVerlet=new h(t/2,s/2)}setupMouse(){this.canvasEuler.addEventListener("mousemove",t=>{const s=this.canvasEuler.getBoundingClientRect();this.mouseEuler.x=t.clientX-s.left,this.mouseEuler.y=t.clientY-s.top}),this.canvasVerlet.addEventListener("mousemove",t=>{const s=this.canvasVerlet.getBoundingClientRect();this.mouseVerlet.x=t.clientX-s.left,this.mouseVerlet.y=t.clientY-s.top})}start(){this.animate()}stop(){cancelAnimationFrame(this.animationId),this.eulerParticle.trail=[],this.verletParticle.trail=[]}updateEuler(t,s){const i=this.eulerParticle,e=h.sub(this.mouseEuler,i.pos);e.normalize(),e.mult(.5),i.acc=e,i.vel.add(i.acc),i.vel.mult(.95),i.pos.add(i.vel),i.trail.push(i.pos.copy()),i.trail.length>50&&i.trail.shift(),this.constrainToBounds(i,t,s)}updateVerlet(t,s){const i=this.verletParticle,e=h.sub(this.mouseVerlet,i.pos);e.normalize(),e.mult(.5),i.acc=e;const o=h.sub(i.pos,i.oldPos);o.mult(.95),i.oldPos=i.pos.copy(),i.pos.add(o),i.pos.add(i.acc),i.trail.push(i.pos.copy()),i.trail.length>50&&i.trail.shift(),this.constrainToBounds(i,t,s)}constrainToBounds(t,s,i){t.pos.x<20&&(t.pos.x=20,t.vel.x*=-.5,t.oldPos.x=t.pos.x+t.vel.x),t.pos.x>s-20&&(t.pos.x=s-20,t.vel.x*=-.5,t.oldPos.x=t.pos.x+t.vel.x),t.pos.y<20&&(t.pos.y=20,t.vel.y*=-.5,t.oldPos.y=t.pos.y+t.vel.y),t.pos.y>i-20&&(t.pos.y=i-20,t.vel.y*=-.5,t.oldPos.y=t.pos.y+t.vel.y)}draw(t,s,i,e,o){if(t.fillStyle=v(.15),t.fillRect(0,0,i,e),s.trail.length>1){t.beginPath(),t.moveTo(s.trail[0].x,s.trail[0].y);for(let r=1;r<s.trail.length;r++)t.lineTo(s.trail[r].x,s.trail[r].y);t.strokeStyle="rgba(248, 113, 113, 0.3)",t.lineWidth=2,t.stroke()}t.beginPath(),t.arc(o.x,o.y,15,0,Math.PI*2),t.strokeStyle="rgba(248, 113, 113, 0.2)",t.lineWidth=1,t.stroke(),t.beginPath(),t.arc(s.pos.x,s.pos.y,12,0,Math.PI*2),t.fillStyle="#f87171",t.fill();const n=h.mult(s.vel,10);t.beginPath(),t.moveTo(s.pos.x,s.pos.y),t.lineTo(s.pos.x+n.x,s.pos.y+n.y),t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth=2,t.stroke()}}class yt{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"points",[]);a(this,"mouse");a(this,"isDragging",!1);a(this,"animationId",0);a(this,"stiffness",.08);a(this,"damping",.92);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;this.ctx.fillStyle=v(.1),this.ctx.fillRect(0,0,t,s);for(const i of this.points){let e=i.target;if(this.isDragging){const c=h.dist(i.target,this.mouse),l=Math.max(0,1-c/200);l>0&&(e=h.lerp(i.target,this.mouse,l*.8))}const o=h.sub(e,i.pos);if(o.mult(this.stiffness),i.vel.add(o),i.vel.mult(this.damping),i.pos.add(i.vel),i.trail.push(i.pos.copy()),i.trail.length>20&&i.trail.shift(),i.trail.length>1){this.ctx.beginPath(),this.ctx.moveTo(i.trail[0].x,i.trail[0].y);for(let c=1;c<i.trail.length;c++)this.ctx.lineTo(i.trail[c].x,i.trail[c].y);this.ctx.strokeStyle="rgba(248, 113, 113, 0.15)",this.ctx.lineWidth=2,this.ctx.stroke()}this.ctx.beginPath(),this.ctx.moveTo(i.target.x,i.target.y),this.ctx.lineTo(i.pos.x,i.pos.y),this.ctx.strokeStyle="rgba(248, 113, 113, 0.2)",this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(i.target.x,i.target.y,4,0,Math.PI*2),this.ctx.fillStyle="rgba(248, 113, 113, 0.3)",this.ctx.fill();const r=8+i.vel.mag()*2;this.ctx.beginPath(),this.ctx.arc(i.pos.x,i.pos.y,r,0,Math.PI*2),this.ctx.fillStyle="#f87171",this.ctx.fill()}this.isDragging&&(this.ctx.beginPath(),this.ctx.arc(this.mouse.x,this.mouse.y,30,0,Math.PI*2),this.ctx.strokeStyle="rgba(248, 113, 113, 0.3)",this.ctx.lineWidth=2,this.ctx.stroke()),this.ctx.fillStyle="#666",this.ctx.font="12px monospace",this.ctx.fillText(`stiffness: ${this.stiffness.toFixed(2)}`,15,25),this.ctx.fillText(`damping: ${this.damping.toFixed(2)}`,15,45)});this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.mouse=new h(0,0),this.resize(),this.setupControls(),this.setupMouse(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=this.canvas.offsetWidth*window.devicePixelRatio,this.canvas.height=this.canvas.offsetHeight*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}setupControls(){const t=document.getElementById("damping-slider"),s=document.getElementById("stiffness-slider");t&&t.addEventListener("input",i=>{this.damping=parseFloat(i.target.value)}),s&&s.addEventListener("input",i=>{this.stiffness=parseFloat(i.target.value)})}setupMouse(){this.canvas.addEventListener("mousedown",t=>{this.isDragging=!0,this.updateMouse(t)}),this.canvas.addEventListener("mousemove",t=>{this.updateMouse(t)}),this.canvas.addEventListener("mouseup",()=>{this.isDragging=!1}),this.canvas.addEventListener("mouseleave",()=>{this.isDragging=!1})}updateMouse(t){const s=this.canvas.getBoundingClientRect();this.mouse.x=t.clientX-s.left,this.mouse.y=t.clientY-s.top}start(){const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight,i=t/2,e=s/2;this.mouse=new h(i,e);const o=5,n=4,r=t/(o+1),c=s/(n+1);for(let l=0;l<o;l++)for(let d=0;d<n;d++){const p=r*(l+1),m=c*(d+1);this.points.push({pos:new h(p,m),vel:new h(0,0),target:new h(p,m),trail:[]})}this.animate()}stop(){cancelAnimationFrame(this.animationId),this.points=[]}}class wt{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"particles",[]);a(this,"constraints",[]);a(this,"mouse");a(this,"draggedParticle",null);a(this,"animationId",0);a(this,"constraintEnabled",!0);a(this,"gravity",.3);a(this,"friction",.99);a(this,"stiffness",1);a(this,"iterations",3);a(this,"cols",12);a(this,"rows",8);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;this.ctx.fillStyle=v(.3),this.ctx.fillRect(0,0,t,s);const i=new h(0,this.gravity);for(const e of this.particles)e.applyForce(i);for(const e of this.particles)e.update(this.friction);if(this.constraintEnabled)for(let e=0;e<this.iterations;e++)for(const o of this.constraints)o.solve();for(const e of this.particles)e.pos.x<10&&(e.pos.x=10),e.pos.x>t-10&&(e.pos.x=t-10),e.pos.y<10&&(e.pos.y=10),e.pos.y>s-10&&(e.pos.y=s-10);for(const e of this.constraints){if(this.ctx.beginPath(),this.ctx.moveTo(e.p1.pos.x,e.p1.pos.y),this.ctx.lineTo(e.p2.pos.x,e.p2.pos.y),this.constraintEnabled){const o=h.dist(e.p1.pos,e.p2.pos),n=Math.abs(o-e.length)/e.length,r=Math.min(n*5,1);this.ctx.strokeStyle=`rgba(${248+7*r}, ${113-113*r+204*r}, ${113-113*r+21*r}, ${.4+r*.4})`}else{const o=Math.abs(h.dist(e.p1.pos,e.p2.pos)-e.length),n=Math.min(o/50,1);this.ctx.strokeStyle=`rgba(${255*n}, ${231*(1-n)}, ${183*(1-n)}, 0.4)`}this.ctx.lineWidth=1,this.ctx.stroke()}for(const e of this.particles)this.ctx.beginPath(),this.ctx.arc(e.pos.x,e.pos.y,e.radius,0,Math.PI*2),this.ctx.fillStyle=e.color,this.ctx.fill();this.ctx.fillStyle="#666",this.ctx.font="12px monospace",this.ctx.fillText(`constraint: ${this.constraintEnabled?"ON":"OFF"}`,15,25),this.ctx.fillText(`iterations: ${this.iterations}`,15,45),this.ctx.fillText(`stiffness: ${this.stiffness.toFixed(2)}`,15,65),this.ctx.fillText(`grid: ${this.cols}x${this.rows}`,15,85),this.ctx.fillText("drag particles to interact",15,s-15)});this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.mouse=new h(0,0),this.resize(),this.setupControls(),this.setupMouse(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=this.canvas.offsetWidth*window.devicePixelRatio,this.canvas.height=this.canvas.offsetHeight*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}setupControls(){const t=document.querySelectorAll("[data-constraint]");t.forEach(s=>{s.addEventListener("click",()=>{t.forEach(i=>i.classList.remove("active")),s.classList.add("active"),this.constraintEnabled=s.getAttribute("data-constraint")==="on"})}),this.setupSlider("constraint-gravity",s=>{this.gravity=s,this.updateValueDisplay("constraint-gravity-value",s.toFixed(2))}),this.setupSlider("constraint-friction",s=>{this.friction=s,this.updateValueDisplay("constraint-friction-value",s.toFixed(3))}),this.setupSlider("constraint-stiffness",s=>{this.stiffness=s,this.updateValueDisplay("constraint-stiffness-value",s.toFixed(2));for(const i of this.constraints)i.stiffness=s}),this.setupSlider("constraint-iterations",s=>{this.iterations=Math.floor(s),this.updateValueDisplay("constraint-iterations-value",this.iterations.toString())}),this.setupSlider("constraint-cols",s=>{this.cols=Math.floor(s),this.updateValueDisplay("constraint-cols-value",this.cols.toString()),this.rebuildCloth()}),this.setupSlider("constraint-rows",s=>{this.rows=Math.floor(s),this.updateValueDisplay("constraint-rows-value",this.rows.toString()),this.rebuildCloth()})}setupSlider(t,s){const i=document.getElementById(t);i&&i.addEventListener("input",e=>{s(parseFloat(e.target.value))})}updateValueDisplay(t,s){const i=document.getElementById(t);i&&(i.textContent=s)}setupMouse(){this.canvas.addEventListener("mousedown",t=>{this.updateMouse(t),this.draggedParticle=this.findNearestParticle()}),this.canvas.addEventListener("mousemove",t=>{this.updateMouse(t),this.draggedParticle&&!this.draggedParticle.pinned&&(this.draggedParticle.pos=this.mouse.copy(),this.draggedParticle.oldPos=this.mouse.copy())}),this.canvas.addEventListener("mouseup",()=>{this.draggedParticle=null}),this.canvas.addEventListener("mouseleave",()=>{this.draggedParticle=null})}updateMouse(t){const s=this.canvas.getBoundingClientRect();this.mouse.x=t.clientX-s.left,this.mouse.y=t.clientY-s.top}findNearestParticle(){let t=null,s=30;for(const i of this.particles){const e=h.dist(this.mouse,i.pos);e<s&&(s=e,t=i)}return t}rebuildCloth(){const t=this.canvas.offsetWidth;this.particles=[],this.constraints=[];const s=t*.8,i=Math.min(30,s/(this.cols-1)),e=(t-(this.cols-1)*i)/2,o=80;for(let n=0;n<this.rows;n++)for(let r=0;r<this.cols;r++){const c=e+r*i,l=o+n*i,d=Math.max(1,Math.floor(this.cols/4)),p=n===0&&(r%d===0||r===this.cols-1);this.particles.push(new X(c,l,{pinned:p,radius:p?6:4,color:"#f87171"}))}for(let n=0;n<this.rows;n++)for(let r=0;r<this.cols;r++){const c=n*this.cols+r;r<this.cols-1&&this.constraints.push(new U(this.particles[c],this.particles[c+1],i,this.stiffness)),n<this.rows-1&&this.constraints.push(new U(this.particles[c],this.particles[c+this.cols],i,this.stiffness))}}start(){this.rebuildCloth(),this.animate()}stop(){cancelAnimationFrame(this.animationId),this.particles=[],this.constraints=[]}}class Pt{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"particles",[]);a(this,"time",0);a(this,"animationId",0);a(this,"transitionProgress",0);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;this.ctx.fillStyle=v(.1),this.ctx.fillRect(0,0,t,s),this.time+=.015,this.transitionProgress=(Math.sin(this.time*.3)+1)/2;for(const e of this.particles){const o=e.basePos.x+Math.sin(this.time+e.phase)*15,n=e.basePos.y+Math.cos(this.time*.8+e.phase)*15,c=E.noise3D(e.pos.x*.005,e.pos.y*.005,this.time*.5)*Math.PI*2,l=e.pos.x+Math.cos(c)*1.5,d=e.pos.y+Math.sin(c)*1.5,p=o*(1-this.transitionProgress)+l*this.transitionProgress,m=n*(1-this.transitionProgress)+d*this.transitionProgress;e.pos.x+=(p-e.pos.x)*.1,e.pos.y+=(m-e.pos.y)*.1,this.transitionProgress>.5&&(e.pos.x<0&&(e.pos.x=t),e.pos.x>t&&(e.pos.x=0),e.pos.y<0&&(e.pos.y=s),e.pos.y>s&&(e.pos.y=0));const u=.3+this.transitionProgress*.5;this.ctx.beginPath(),this.ctx.arc(e.pos.x,e.pos.y,3,0,Math.PI*2),this.ctx.fillStyle=`rgba(248, 113, 113, ${u})`,this.ctx.fill()}this.ctx.fillStyle="rgba(255, 255, 255, 0.3)",this.ctx.font="14px monospace";const i=this.transitionProgress<.5?"← Object Motion":"Space Motion →";this.ctx.fillText(i,20,30),this.ctx.fillStyle="rgba(255, 255, 255, 0.1)",this.ctx.fillRect(20,45,150,4),this.ctx.fillStyle="#f87171",this.ctx.fillRect(20,45,150*this.transitionProgress,4)});this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.resize(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=this.canvas.offsetWidth*window.devicePixelRatio,this.canvas.height=this.canvas.offsetHeight*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}start(){const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight,i=20,e=15,o=t/(i+1),n=s/(e+1);for(let r=0;r<i;r++)for(let c=0;c<e;c++){const l=o*(r+1),d=n*(c+1);this.particles.push({pos:new h(l,d),vel:new h(0,0),basePos:new h(l,d),phase:(r+c)*.3})}this.animate()}stop(){cancelAnimationFrame(this.animationId),this.particles=[],this.transitionProgress=0}}class St{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"particles",[]);a(this,"flowField",[]);a(this,"time",0);a(this,"animationId",0);a(this,"showVectors",!0);a(this,"resolution",25);a(this,"noiseScale",.1);a(this,"noiseSpeed",.3);a(this,"forceStrength",.2);a(this,"maxSpeed",2);a(this,"particleCount",500);a(this,"trailOpacity",.1);a(this,"cols",0);a(this,"rows",0);a(this,"animate",()=>{var i;this.animationId=requestAnimationFrame(this.animate);const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;if(this.ctx.fillStyle=v(this.trailOpacity),this.ctx.fillRect(0,0,t,s),this.time+=.01,this.updateFlowField(),this.showVectors)for(let e=0;e<this.rows;e++)for(let o=0;o<this.cols;o++){const n=o+e*this.cols,r=this.flowField[n][0],c=o*this.resolution+this.resolution/2,l=e*this.resolution+this.resolution/2,d=this.resolution*.4,p=c+Math.cos(r)*d,m=l+Math.sin(r)*d,u=(r+Math.PI)/(Math.PI*2)*30;this.ctx.strokeStyle=`hsla(${u}, 80%, 60%, 0.2)`,this.ctx.beginPath(),this.ctx.moveTo(c,l),this.ctx.lineTo(p,m),this.ctx.lineWidth=1,this.ctx.stroke();const x=4;this.ctx.beginPath(),this.ctx.moveTo(p,m),this.ctx.lineTo(p-x*Math.cos(r-Math.PI/6),m-x*Math.sin(r-Math.PI/6)),this.ctx.moveTo(p,m),this.ctx.lineTo(p-x*Math.cos(r+Math.PI/6),m-x*Math.sin(r+Math.PI/6)),this.ctx.stroke()}for(const e of this.particles){const o=Math.floor(e.pos.x/this.resolution),n=Math.floor(e.pos.y/this.resolution),r=Math.max(0,Math.min(o+n*this.cols,this.flowField.length-1)),c=((i=this.flowField[r])==null?void 0:i[0])||0,l=h.fromAngle(c).mult(this.forceStrength);e.vel.add(l),e.vel.limit(this.maxSpeed),e.pos.add(e.vel),e.life--,(e.pos.x<0||e.pos.x>t||e.pos.y<0||e.pos.y>s||e.life<=0)&&(e.pos=new h(Math.random()*t,Math.random()*s),e.vel=new h(0,0),e.maxLife=100+Math.random()*100,e.life=e.maxLife);const p=(e.vel.heading()+Math.PI)/(Math.PI*2)*30,m=e.life/e.maxLife*.8+.2;this.ctx.beginPath(),this.ctx.arc(e.pos.x,e.pos.y,1.5,0,Math.PI*2),this.ctx.fillStyle=`hsla(${p}, 80%, 60%, ${m})`,this.ctx.fill()}this.ctx.fillStyle="#666",this.ctx.font="12px monospace",this.ctx.fillText(`particles: ${this.particles.length}`,15,25),this.ctx.fillText(`grid: ${this.cols}x${this.rows}`,15,45)});this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.resize(),this.setupControls(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=this.canvas.offsetWidth*window.devicePixelRatio,this.canvas.height=this.canvas.offsetHeight*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio),this.updateGrid()}updateGrid(){const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;this.cols=Math.ceil(t/this.resolution),this.rows=Math.ceil(s/this.resolution),this.flowField=[];for(let i=0;i<this.cols*this.rows;i++)this.flowField[i]=[0]}setupControls(){const t=document.querySelectorAll("[data-show]");t.forEach(s=>{s.addEventListener("click",()=>{t.forEach(i=>i.classList.remove("active")),s.classList.add("active"),this.showVectors=s.getAttribute("data-show")==="vectors"})}),this.setupSlider("flow-resolution",s=>{this.resolution=Math.floor(s),this.updateValueDisplay("flow-resolution-value",this.resolution.toString()),this.updateGrid()}),this.setupSlider("flow-noise-scale",s=>{this.noiseScale=s,this.updateValueDisplay("flow-noise-scale-value",s.toFixed(2))}),this.setupSlider("flow-noise-speed",s=>{this.noiseSpeed=s,this.updateValueDisplay("flow-noise-speed-value",s.toFixed(2))}),this.setupSlider("flow-force-strength",s=>{this.forceStrength=s,this.updateValueDisplay("flow-force-strength-value",s.toFixed(2))}),this.setupSlider("flow-max-speed",s=>{this.maxSpeed=s,this.updateValueDisplay("flow-max-speed-value",s.toFixed(1))}),this.setupSlider("flow-particle-count",s=>{this.particleCount=Math.floor(s),this.updateValueDisplay("flow-particle-count-value",this.particleCount.toString()),this.resetParticles()}),this.setupSlider("flow-trail-opacity",s=>{this.trailOpacity=s,this.updateValueDisplay("flow-trail-opacity-value",s.toFixed(2))})}setupSlider(t,s){const i=document.getElementById(t);i&&i.addEventListener("input",e=>{s(parseFloat(e.target.value))})}updateValueDisplay(t,s){const i=document.getElementById(t);i&&(i.textContent=s)}resetParticles(){const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;this.particles=[];for(let i=0;i<this.particleCount;i++){const e=100+Math.random()*100;this.particles.push({pos:new h(Math.random()*t,Math.random()*s),vel:new h(0,0),life:Math.random()*e,maxLife:e})}}start(){this.resetParticles(),this.animate()}stop(){cancelAnimationFrame(this.animationId),this.particles=[]}updateFlowField(){for(let t=0;t<this.rows;t++)for(let s=0;s<this.cols;s++){const i=s+t*this.cols,e=E.noise3D(s*this.noiseScale,t*this.noiseScale,this.time*this.noiseSpeed);this.flowField[i]=[e*Math.PI*2]}}}class Mt{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"particles",[]);a(this,"time",0);a(this,"animationId",0);a(this,"scale",.004);a(this,"intensity",1.5);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;this.ctx.fillStyle=v(.03),this.ctx.fillRect(0,0,t,s),this.time+=.005;for(const i of this.particles){const e=Y(i.pos.x,i.pos.y,this.time,this.scale);if(i.vel.x+=e.x*this.intensity*.3,i.vel.y+=e.y*this.intensity*.3,i.vel.mult(.96),i.vel.limit(3),i.pos.add(i.vel),i.life++,i.trail.push(i.pos.copy()),i.trail.length>40&&i.trail.shift(),i.trail.length>2){this.ctx.beginPath(),this.ctx.moveTo(i.trail[0].x,i.trail[0].y);for(let n=1;n<i.trail.length;n++)this.ctx.lineTo(i.trail[n].x,i.trail[n].y);const o=Math.min(i.life/30,1)*(1-i.life/i.maxLife);this.ctx.strokeStyle=`rgba(248, 113, 113, ${o*.4})`,this.ctx.lineWidth=1.5,this.ctx.stroke()}if(i.pos.x<-50||i.pos.x>t+50||i.pos.y<-50||i.pos.y>s+50||i.life>i.maxLife){const o=this.createParticle();i.pos=o.pos,i.vel=o.vel,i.trail=[],i.life=0}}this.ctx.fillStyle="rgba(255, 255, 255, 0.3)",this.ctx.font="12px monospace",this.ctx.fillText(`scale: ${this.scale.toFixed(4)}`,15,25),this.ctx.fillText(`intensity: ${this.intensity.toFixed(1)}`,15,45)});this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.resize(),this.setupControls(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=this.canvas.offsetWidth*window.devicePixelRatio,this.canvas.height=this.canvas.offsetHeight*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}setupControls(){const t=document.getElementById("curl-scale"),s=document.getElementById("curl-intensity");t&&t.addEventListener("input",i=>{this.scale=parseFloat(i.target.value)}),s&&s.addEventListener("input",i=>{this.intensity=parseFloat(i.target.value)})}createParticle(){const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;return{pos:new h(Math.random()*t,Math.random()*s),vel:new h(0,0),trail:[],life:0,maxLife:150+Math.random()*150}}start(){for(let t=0;t<300;t++)this.particles.push(this.createParticle());this.animate()}stop(){cancelAnimationFrame(this.animationId),this.particles=[]}}function bt(f){return f}function it(f){return f*f*(3-2*f)}class Et{constructor(t,s){a(this,"canvasLinear");a(this,"canvasSmooth");a(this,"ctxLinear");a(this,"ctxSmooth");a(this,"dotsLinear",[]);a(this,"dotsSmooth",[]);a(this,"time",0);a(this,"animationId",0);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvasLinear.parentElement,s=t.offsetWidth,i=t.offsetHeight;this.ctxLinear.fillStyle=q(),this.ctxLinear.fillRect(0,0,s,i),this.ctxSmooth.fillStyle=q(),this.ctxSmooth.fillRect(0,0,s,i),this.time+=.008;const e=3,o=this.time%e/e,r=(Math.floor(this.time/e)%2===0?1:-1)===1?o:1-o;for(const c of this.dotsLinear)this.ctxLinear.beginPath(),this.ctxLinear.moveTo(c.startX,c.pos.y),this.ctxLinear.lineTo(c.endX,c.pos.y),this.ctxLinear.strokeStyle="rgba(248, 113, 113, 0.1)",this.ctxLinear.lineWidth=1,this.ctxLinear.stroke();for(const c of this.dotsSmooth)this.ctxSmooth.beginPath(),this.ctxSmooth.moveTo(c.startX,c.pos.y),this.ctxSmooth.lineTo(c.endX,c.pos.y),this.ctxSmooth.strokeStyle="rgba(248, 113, 113, 0.1)",this.ctxSmooth.lineWidth=1,this.ctxSmooth.stroke();for(let c=0;c<this.dotsLinear.length;c++){const l=this.dotsLinear[c],d=this.dotsSmooth[c],p=Math.max(0,Math.min(1,(r-l.delay)/(1-l.delay*2))),m=p;l.pos.x=l.startX+(l.endX-l.startX)*m;const u=it(p);d.pos.x=d.startX+(d.endX-d.startX)*u,this.ctxLinear.beginPath(),this.ctxLinear.arc(l.pos.x,l.pos.y,8,0,Math.PI*2),this.ctxLinear.fillStyle="#f87171",this.ctxLinear.fill(),this.ctxSmooth.beginPath(),this.ctxSmooth.arc(d.pos.x,d.pos.y,8,0,Math.PI*2),this.ctxSmooth.fillStyle="#f87171",this.ctxSmooth.fill()}this.drawEasingCurve(this.ctxLinear,s,i,bt,"linear(t) = t"),this.drawEasingCurve(this.ctxSmooth,s,i,it,"smoothstep(t)")});this.canvasLinear=document.getElementById(t),this.canvasSmooth=document.getElementById(s),this.ctxLinear=this.canvasLinear.getContext("2d"),this.ctxSmooth=this.canvasSmooth.getContext("2d"),this.resize()}resize(){[this.canvasLinear,this.canvasSmooth].forEach(t=>{const s=t.parentElement,i=s.offsetWidth,e=s.offsetHeight,o=window.devicePixelRatio;t.width=i*o,t.height=e*o,t.getContext("2d").scale(o,o),t.style.width=`${i}px`,t.style.height=`${e}px`})}start(){const t=this.canvasLinear.parentElement,s=t.offsetWidth,i=t.offsetHeight,e=8,o=60,n=(i-o*2)/(e-1);for(let r=0;r<e;r++){const c=o+r*n,l={pos:new h(o,c),startX:o,endX:s-o,progress:0,delay:r*.1};this.dotsLinear.push({...l}),this.dotsSmooth.push({...l})}this.animate()}stop(){cancelAnimationFrame(this.animationId),this.dotsLinear=[],this.dotsSmooth=[]}drawEasingCurve(t,s,i,e,o){const c=s-80-15,l=15;t.fillStyle=v(.5),t.fillRect(c,l,80,60),t.beginPath();for(let d=0;d<=80;d++){const p=d/80,m=e(p),u=c+d,x=l+60-m*60;d===0?t.moveTo(u,x):t.lineTo(u,x)}t.strokeStyle="#f87171",t.lineWidth=2,t.stroke(),t.fillStyle="#666",t.font="10px monospace",t.fillText(o,c,l+60+15)}}class Lt{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"particles",[]);a(this,"constraints",[]);a(this,"time",0);a(this,"animationId",0);a(this,"flowStrength",.5);a(this,"springStrength",.02);a(this,"gravityStrength",.1);a(this,"centerParticle",null);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight,i=t/2,e=s/2;this.ctx.fillStyle=v(.15),this.ctx.fillRect(0,0,t,s),this.time+=.01,this.centerParticle&&(this.centerParticle.pos.x=i+Math.sin(this.time*.3)*50,this.centerParticle.pos.y=e+Math.cos(this.time*.2)*30);for(const o of this.particles){if(o.pinned)continue;o.applyForce(new h(0,this.gravityStrength));const n=Y(o.pos.x,o.pos.y,this.time,.005);o.applyForce(new h(n.x*this.flowStrength,n.y*this.flowStrength));const r=h.sub(new h(i,e),o.pos),c=r.mag();c>50&&(r.normalize().mult(this.springStrength*(c-50)*.01),o.applyForce(r))}for(const o of this.particles)o.update(.98);for(let o=0;o<3;o++)for(const n of this.constraints)n.solve();for(const o of this.particles)o.pinned||(o.pos.x<20&&(o.pos.x=20),o.pos.x>t-20&&(o.pos.x=t-20),o.pos.y<20&&(o.pos.y=20),o.pos.y>s-20&&(o.pos.y=s-20));for(const o of this.constraints)this.ctx.beginPath(),this.ctx.moveTo(o.p1.pos.x,o.p1.pos.y),this.ctx.lineTo(o.p2.pos.x,o.p2.pos.y),this.ctx.strokeStyle="rgba(248, 113, 113, 0.3)",this.ctx.lineWidth=1,this.ctx.stroke();for(const o of this.particles)this.ctx.beginPath(),this.ctx.arc(o.pos.x,o.pos.y,o.radius,0,Math.PI*2),this.ctx.fillStyle=o.color,this.ctx.fill();this.ctx.fillStyle="rgba(255, 255, 255, 0.3)",this.ctx.font="11px monospace",this.ctx.fillText(`flow: ${this.flowStrength.toFixed(1)}`,15,25),this.ctx.fillText(`spring: ${this.springStrength.toFixed(3)}`,15,40),this.ctx.fillText(`gravity: ${this.gravityStrength.toFixed(2)}`,15,55)});this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.resize(),this.setupControls(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=this.canvas.offsetWidth*window.devicePixelRatio,this.canvas.height=this.canvas.offsetHeight*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}setupControls(){const t=document.getElementById("final-flow"),s=document.getElementById("final-spring"),i=document.getElementById("final-gravity");t&&t.addEventListener("input",e=>{this.flowStrength=parseFloat(e.target.value)}),s&&s.addEventListener("input",e=>{this.springStrength=parseFloat(e.target.value)}),i&&i.addEventListener("input",e=>{this.gravityStrength=parseFloat(e.target.value)})}start(){const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight,i=t/2,e=s/2;this.particles=[],this.constraints=[],this.centerParticle=new X(i,e,{pinned:!0,radius:10,color:"#f87171"}),this.particles.push(this.centerParticle);const o=8,n=12,r=20;for(let c=0;c<o;c++){const l=c/o*Math.PI*2;let d=this.centerParticle;for(let p=0;p<n;p++){const m=r*(p+1),u=i+Math.cos(l)*m,x=e+Math.sin(l)*m,g=new X(u,x,{radius:3+(n-p)*.3,color:`rgba(248, 113, 113, ${.5+(n-p)/n*.5})`});this.particles.push(g),this.constraints.push(new U(d,g,r,.8)),d=g}}for(let c=0;c<50;c++){const l=Math.random()*Math.PI*2,d=100+Math.random()*200;this.particles.push(new X(i+Math.cos(l)*d,e+Math.sin(l)*d,{radius:2,color:"rgba(248, 113, 113, 0.6)"}))}this.animate()}stop(){cancelAnimationFrame(this.animationId),this.particles=[],this.constraints=[]}}class It{constructor(t){a(this,"canvas");a(this,"ctx");a(this,"particles",[]);a(this,"time",0);a(this,"animationId",0);a(this,"phase",0);a(this,"animate",()=>{this.animationId=requestAnimationFrame(this.animate);const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight,i=t/2,e=s/2;this.ctx.fillStyle=v(.02),this.ctx.fillRect(0,0,t,s),this.time+=.003,this.phase=(Math.sin(this.time*.5)+1)/2;for(const n of this.particles){const r=Y(n.pos.x,n.pos.y,this.time,.003),c=h.sub(new h(i,e),n.pos),l=c.mag();c.normalize();const d=1-this.phase*.7,p=this.phase*.3;if(n.vel.x+=r.x*d*.5,n.vel.y+=r.y*d*.5,l>30&&(n.vel.x+=c.x*p*.2,n.vel.y+=c.y*p*.2),this.phase>.3&&l<300){const m=new h(-c.y,c.x);n.vel.x+=m.x*this.phase*.1,n.vel.y+=m.y*this.phase*.1}if(n.vel.mult(.97),n.vel.limit(2),n.pos.add(n.vel),n.life++,n.trail.push(n.pos.copy()),n.trail.length>30&&n.trail.shift(),n.trail.length>2){this.ctx.beginPath(),this.ctx.moveTo(n.trail[0].x,n.trail[0].y);for(let u=1;u<n.trail.length;u++)this.ctx.lineTo(n.trail[u].x,n.trail[u].y);const m=Math.min(n.life/50,1)*(1-n.life/n.maxLife)*.3;this.ctx.strokeStyle=`hsla(${n.hue}, 70%, 70%, ${m})`,this.ctx.lineWidth=1,this.ctx.stroke()}if(n.pos.x<-100||n.pos.x>t+100||n.pos.y<-100||n.pos.y>s+100||n.life>n.maxLife){const m=this.createParticle();n.pos=m.pos,n.vel=m.vel,n.trail=[],n.life=0,n.hue=0+Math.random()*15}}if(this.phase>.3){const n=this.ctx.createRadialGradient(i,e,0,i,e,150);n.addColorStop(0,`rgba(248, 113, 113, ${this.phase*.1})`),n.addColorStop(1,"rgba(248, 113, 113, 0)"),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,t,s)}this.ctx.fillStyle="rgba(255, 255, 255, 0.2)",this.ctx.font="11px monospace";const o=this.phase<.5?"Flow":"Formation";this.ctx.fillText(o,15,25)});this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.resize(),window.addEventListener("resize",()=>this.resize())}resize(){this.canvas.width=this.canvas.offsetWidth*window.devicePixelRatio,this.canvas.height=this.canvas.offsetHeight*window.devicePixelRatio,this.ctx.scale(window.devicePixelRatio,window.devicePixelRatio)}createParticle(){const t=this.canvas.offsetWidth,s=this.canvas.offsetHeight;let i,e;if(Math.random()<.5)switch(Math.floor(Math.random()*4)){case 0:i=Math.random()*t,e=0;break;case 1:i=t,e=Math.random()*s;break;case 2:i=Math.random()*t,e=s;break;default:i=0,e=Math.random()*s;break}else i=t/2+(Math.random()-.5)*100,e=s/2+(Math.random()-.5)*100;return{pos:new h(i,e),vel:new h(0,0),trail:[],hue:0+Math.random()*15,life:0,maxLife:200+Math.random()*200}}start(){for(let t=0;t<200;t++)this.particles.push(this.createParticle());this.animate()}stop(){cancelAnimationFrame(this.animationId),this.particles=[]}}class Ft{constructor(){a(this,"currentSlide",1);a(this,"totalSlides",16);a(this,"demos",new Map);a(this,"initializedDemos",new Set);this.setupNavigation(),this.setupKeyboardNavigation(),this.updateProgress(),this.initializeDemo(1)}setupNavigation(){const t=document.getElementById("prev-btn"),s=document.getElementById("next-btn"),i=document.getElementById("scrollbar-toggle"),e=document.getElementById("theme-toggle");t==null||t.addEventListener("click",()=>this.goToSlide(this.currentSlide-1)),s==null||s.addEventListener("click",()=>this.goToSlide(this.currentSlide+1)),i==null||i.addEventListener("click",()=>{document.body.classList.toggle("show-scrollbar"),i.classList.toggle("active")}),e==null||e.addEventListener("click",()=>{const o=document.body.classList.toggle("light-mode");e.textContent=o?"🌙":"☀️",e.classList.toggle("active")})}setupKeyboardNavigation(){document.addEventListener("keydown",t=>{switch(t.key){case"ArrowRight":case"ArrowDown":case" ":case"PageDown":t.preventDefault(),this.goToSlide(this.currentSlide+1);break;case"ArrowLeft":case"ArrowUp":case"PageUp":t.preventDefault(),this.goToSlide(this.currentSlide-1);break;case"Home":t.preventDefault(),this.goToSlide(1);break;case"End":t.preventDefault(),this.goToSlide(this.totalSlides);break}})}goToSlide(t){if(t<1||t>this.totalSlides||t===this.currentSlide)return;const s=this.demos.get(this.currentSlide);s==null||s.stop(),document.querySelectorAll(".slide").forEach((e,o)=>{o+1===t?e.classList.add("active"):e.classList.remove("active")}),this.currentSlide=t,this.updateProgress(),this.initializeDemo(t)}updateProgress(){const t=document.getElementById("progress"),s=document.getElementById("current-slide");t&&(t.style.width=`${this.currentSlide/this.totalSlides*100}%`),s&&(s.textContent=this.currentSlide.toString().padStart(2,"0"))}initializeDemo(t){this.initializedDemos.has(t)||(this.createDemo(t),this.initializedDemos.add(t));const s=this.demos.get(t);s==null||s.start()}createDemo(t){let s=null;switch(t){case 1:s=new dt("canvas-01");break;case 2:s=new ft("canvas-02-left","canvas-02-right");break;case 3:s=new pt("canvas-03");break;case 4:s=new mt("canvas-04");break;case 5:s=new ut("canvas-05");break;case 6:s=new gt("canvas-06");break;case 7:s=new vt("canvas-07-euler","canvas-07-verlet");break;case 8:s=new yt("canvas-08");break;case 9:s=new wt("canvas-09");break;case 10:s=new Pt("canvas-10");break;case 11:s=new St("canvas-11");break;case 12:s=new Mt("canvas-12");break;case 13:s=new Et("canvas-13-linear","canvas-13-smooth");break;case 14:s=new Lt("canvas-14");break;case 15:s=new It("canvas-15");break}s&&this.demos.set(t,s)}}document.addEventListener("DOMContentLoaded",()=>{new Ft});
